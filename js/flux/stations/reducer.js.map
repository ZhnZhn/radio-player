{"version":3,"sources":["../../../src/flux/stations/reducer.js"],"names":["fByTitle","title","item","fByCategory","category","_findByCategory","arr","_max","length","i","reducer","state","action","type","ACTION","ADD_CATEGORY","categories","currentStation","_stationsWithoutCurrent","filter","_station","_categories","REMOVE_CATEGORY","SET_CURRENT_STATION","station","_stations","unshift"],"mappings":";;;;;AAAA;;AAEA,IAAMA,QAAQ,GAAG,SAAXA,QAAW,CAAAC,KAAK;AAAA,SACpB,UAAAC,IAAI;AAAA,WAAIA,IAAI,CAACD,KAAL,KAAeA,KAAnB;AAAA,GADgB;AAAA,CAAtB;;AAEA,IAAME,WAAW,GAAG,SAAdA,WAAc,CAAAC,QAAQ;AAAA,SAC1B,UAAAF,IAAI;AAAA,WAAIA,IAAI,CAACE,QAAL,KAAkBA,QAAtB;AAAA,GADsB;AAAA,CAA5B;;AAGA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,GAAD,EAAMF,QAAN,EAAmB;AACzC,MAAMG,IAAI,GAAGD,GAAG,CAACE,MAAjB;;AACA,OAAK,IAAIC,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACF,IAAhB,EAAsBE,CAAC,EAAvB,EAA2B;AACzB,QAAIH,GAAG,CAACG,CAAD,CAAH,CAAOL,QAAP,KAAoBA,QAAxB,EAAkC;AAChC,aAAOE,GAAG,CAACG,CAAD,CAAV;AACD;AACF;AACF,CAPD;;AASA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAASC,KAAT,EAAmBC,MAAnB,EAA0B;AAAA,MAAjBD,KAAiB;AAAjBA,IAAAA,KAAiB,GAAX,EAAW;AAAA;;AACxC,UAAOC,MAAM,CAACC,IAAd;AACE,SAAKC,gBAAOC,YAAZ;AAA0B;AAAA,YAChBC,UADgB,GACyBJ,MADzB,CAChBI,UADgB;AAAA,YACJZ,QADI,GACyBQ,MADzB,CACJR,QADI;AAAA,YACMa,cADN,GACyBL,MADzB,CACMK,cADN;AAAA,mBAEVA,cAAc,IAAI,EAFR;AAAA,YAEpBhB,KAFoB,QAEpBA,KAFoB;AAAA,YAGtBiB,uBAHsB,GAGIF,UAAU,CAACG,MAAX,CAAkBnB,QAAQ,CAACC,KAAD,CAA1B,CAHJ;AAAA,YAItBmB,QAJsB,GAIXf,eAAe,CAACM,KAAD,EAAQP,QAAR,CAJJ;AAAA,YAKtBiB,WALsB,GAKRD,QAAQ,GACjBF,uBAAuB,CAACC,MAAxB,CAA+BnB,QAAQ,CAACoB,QAAQ,CAACnB,KAAV,CAAvC,CADiB,GAEjBiB,uBAPiB;;AAQxB,yBAAYG,WAAZ,EAA4BV,KAA5B;AACD;;AACD,SAAKG,gBAAOQ,eAAZ;AAA6B;AAAA,YACnBlB,SADmB,GACNQ,MADM,CACnBR,QADmB;AAE3B,eAAOO,KAAK,CAACQ,MAAN,CAAahB,WAAW,CAACC,SAAD,CAAxB,CAAP;AACD;;AACD,SAAKU,gBAAOS,mBAAZ;AAAiC;AAAA,YACvBC,OADuB,GACKZ,MADL,CACvBY,OADuB;AAAA,YACdP,eADc,GACKL,MADL,CACdK,cADc;AAAA,oBAEjBO,OAAO,IAAI,EAFM;AAAA,YAE3BvB,MAF2B,SAE3BA,KAF2B;AAAA,YAG7BwB,SAH6B,GAGjBd,KAAK,CAACQ,MAAN,CAAanB,QAAQ,CAACC,MAAD,CAArB,CAHiB;;AAK/B,YAAIgB,eAAJ,EAAoB;AAClBQ,UAAAA,SAAS,CAACC,OAAV,CAAkBT,eAAlB;AACD;;AACD,eAAOQ,SAAP;AACD;;AACD;AACE,aAAOd,KAAP;AA1BJ;AA4BD,CA7BD;;eA+BeD,O","sourcesContent":["import { ACTION } from './actions'\r\n\r\nconst fByTitle = title =>\r\n  item => item.title !== title;\r\nconst fByCategory = category =>\r\n  item => item.category !== category;\r\n\r\nconst _findByCategory = (arr, category) => {\r\n  const _max = arr.length;\r\n  for (let i=0; i<_max; i++) {\r\n    if (arr[i].category === category) {\r\n      return arr[i];\r\n    }\r\n  }\r\n};\r\n\r\nconst reducer = function(state={}, action){\r\n  switch(action.type){\r\n    case ACTION.ADD_CATEGORY: {\r\n      const { categories, category, currentStation } = action\r\n      , { title } = currentStation || {}\r\n      , _stationsWithoutCurrent = categories.filter(fByTitle(title))\r\n      , _station = _findByCategory(state, category)\r\n      , _categories = _station\r\n           ? _stationsWithoutCurrent.filter(fByTitle(_station.title))\r\n           : _stationsWithoutCurrent;\r\n      return [ ..._categories, ...state ];\r\n    }\r\n    case ACTION.REMOVE_CATEGORY: {\r\n      const { category } = action;\r\n      return state.filter(fByCategory(category));\r\n    }\r\n    case ACTION.SET_CURRENT_STATION: {\r\n      const { station, currentStation } = action\r\n      , { title } = station || {}\r\n      , _stations = state.filter(fByTitle(title));\r\n\r\n      if (currentStation) {\r\n        _stations.unshift(currentStation)\r\n      }\r\n      return _stations;\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default reducer\r\n"],"file":"reducer.js"}