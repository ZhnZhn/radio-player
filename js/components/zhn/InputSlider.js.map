{"version":3,"sources":["../../../src/components/zhn/InputSlider.jsx"],"names":["S","ROOT","position","width","height","marginTop","marginBottom","cursor","userSelect","ROOT_LINE","top","left","LINE_BEFORE","marginRight","backgroundColor","transition","LINE_AFTER","right","marginLeft","LINE_HOVERED","ROOT_CIRCLE","boxSizing","zIndex","margin","backgroundClip","border","borderRadius","transform","overflow","outline","pointerEvents","CIRCLE_DRAGGED","CIRCLE_INNER","CIRCLE_INNER_EL","EMBER","_isFn","fn","_round10","value","exp","isNaN","NaN","toString","split","Math","round","_addStep","step","_toPercent","min","max","_percent","Number","_calcWidth","percent","_crLeftStyle","InputSlider","props","_hMouseEnter","setState","isHovered","_hMouseLeave","_hMouseDown","event","preventDefault","document","addEventListener","_hDragMouseMove","_hDragMouseUp","isDragged","_onDragUpdate","removeEventListener","_hFocusTrack","_hBlurTrack","_hKeyDownTrack","keyCode","state","_value","stepExp","_setValue","dragRunning","requestAnimationFrame","clientX","_calcTrackOffset","_setValueFromPosition","isOnChange","onChange","trackComp","getBoundingClientRect","positionMax","parseFloat","toFixed","_refTrackComp","comp","initValue","arr","length","UNSAFE_componentWillReceiveProps","nextProps","render","style","_lineAfterStyle","_circleStyle","_emberStyle","_circleInnerEl","_widthBeforeStyle","_widthAfterStyle","_leftStyle","setValue","Component","defaultProps"],"mappings":"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","sourcesContent":["import { Component } from 'react';\r\n\r\n/*\r\n Mostly from\r\n https://github.com/callemall/material-ui/blob/master/src/Slider/Slider.js\r\n*/\r\n\r\nconst S = {\r\n  ROOT : {\r\n    position: 'relative',\r\n    width: '100%',\r\n    height: 18,\r\n    marginTop: 8,\r\n    marginBottom: 8,\r\n    cursor: 'default',\r\n    userSelect : 'none'\r\n  },\r\n  ROOT_LINE : {\r\n    position: 'absolute',\r\n    top: 8,\r\n    left: 0,\r\n    width: '100%',\r\n    height: 2\r\n  },\r\n  LINE_BEFORE : {\r\n    position: 'absolute',\r\n    left: 0,\r\n    width: 'calc(15%)',\r\n    height: '100%',\r\n    marginRight: 6,\r\n    backgroundColor: 'rgb(0, 188, 212)',\r\n    transition: 'margin 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms',\r\n  },\r\n  LINE_AFTER : {\r\n    position: 'absolute',\r\n    right: 0,\r\n    width: 'calc(85%)',\r\n    height: '100%',\r\n    marginLeft: 6,\r\n    backgroundColor: 'rgb(189, 189, 189)',\r\n    transition: 'margin 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms',\r\n  },\r\n  LINE_HOVERED : {\r\n    backgroundColor: 'rgb(158, 158, 158)',\r\n  },\r\n  ROOT_CIRCLE : {\r\n    boxSizing: 'borderBox',\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: '15%',\r\n    zIndex: 1,\r\n    width: 12,\r\n    height: 12,\r\n    margin: '1px 0px 0px',\r\n    backgroundColor: 'rgb(0, 188, 212)',\r\n    backgroundClip: 'padding-box',\r\n    border: '0px solid transparent',\r\n    borderRadius: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    overflow: 'visible',\r\n    outline: 'none',\r\n    transition: 'background 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms',\r\n    pointerEvents: 'inherit',\r\n    cursor: 'pointer'\r\n  },\r\n  CIRCLE_DRAGGED : {\r\n    width: 20,\r\n    height: 20\r\n  },\r\n  CIRCLE_INNER : {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    width: 12,\r\n    height: 12,\r\n    overflow: 'visible'\r\n  },\r\n  CIRCLE_INNER_EL : {\r\n    position: 'absolute',\r\n    top: -12,\r\n    left: -12,\r\n    width: '300%',\r\n    height: 36,\r\n    borderRadius: '50%',\r\n    //opacity: '0.16',\r\n    backgroundColor: 'rgba(0, 188, 212, 0.16)',\r\n    transform: 'scale(1)'\r\n  },\r\n  EMBER : {\r\n    top: -12,\r\n    left: -12,\r\n    width: '220%',\r\n    height: 44,\r\n    border: '1px solid #4caf50'\r\n  }\r\n}\r\n\r\nconst _isFn = fn => typeof fn === 'function';\r\n\r\nconst _round10 = (value, exp) => {\r\n    value = +value;\r\n    exp = +exp;\r\n    // If the value is not a number or the exp is not an integer...\r\n    if (isNaN(value) || !(typeof exp === 'number' && exp % 1 === 0)) {\r\n      return NaN;\r\n    }\r\n    // Shift\r\n    value = value.toString().split('e');\r\n    value = Math.round(+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));\r\n    // Shift back\r\n    value = value.toString().split('e');\r\n\r\n    return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));\r\n}\r\n\r\nconst _addStep = (value, step, exp ) => exp\r\n  ? _round10(value + step, exp)\r\n  : (value + step);\r\n\r\nconst _toPercent = (value, min, max) => {\r\n  const _percent = (value - min ) / (max - min);\r\n  return Number.isNaN(_percent)\r\n    ? 0 : _percent*100;\r\n}\r\nconst _calcWidth = percent => ({\r\n  width: `calc(${percent}%)`\r\n})\r\nconst _crLeftStyle = percent => ({\r\n  left: `${percent}%`\r\n})\r\n\r\nclass InputSlider extends Component {\r\n  /*\r\n  static propTypes = {\r\n    initValue: PropTypes.number,\r\n    step : PropTypes.number,\r\n    min : PropTypes.number,\r\n    max : PropTypes.number,\r\n    onChange : PropTypes.func\r\n  }\r\n  */\r\n\r\n  static defaultProps = {\r\n    initValue: 1,\r\n    min : 0,\r\n    max : 1,\r\n    step : 0.05\r\n  }\r\n\r\n  constructor(props){\r\n    super(props)\r\n    const { onChange, step, initValue } = props\r\n    this.isOnChange = _isFn(onChange)\r\n    const arr = (''+step).split('.')\r\n    this.stepExp = (arr[1]) ? -1 * arr[1].length : 0\r\n\r\n    this.state = {\r\n      isHovered: false,\r\n      isDragged: false,\r\n      value: initValue\r\n    }\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps){\r\n    if (nextProps !== this.props){\r\n      this.setState({ value : nextProps.initValue })\r\n    }\r\n  }\r\n\r\n  _hMouseEnter = () => {\r\n    this.setState({ isHovered: true })\r\n  }\r\n  _hMouseLeave = () => {\r\n    this.setState({ isHovered: false })\r\n  }\r\n  _hMouseDown = (event) => {\r\n    // Cancel text selection\r\n    event.preventDefault()\r\n    document.addEventListener('mousemove', this._hDragMouseMove)\r\n    document.addEventListener('mouseup', this._hDragMouseUp)\r\n    this.setState({\r\n      isDragged: true\r\n    })\r\n  }\r\n\r\n  _hDragMouseMove = (event) => {\r\n    this._onDragUpdate(event)\r\n  }\r\n  _hDragMouseUp = () => {\r\n     document.removeEventListener('mousemove', this._hDragMouseMove)\r\n     document.removeEventListener('mouseup', this._hDragMouseUp)\r\n     this.setState({\r\n       isDragged: false\r\n     })\r\n  }\r\n\r\n  _hFocusTrack = () => {\r\n    this.setState({ isHovered: true })\r\n  }\r\n  _hBlurTrack = () => {\r\n    this.setState({ isHovered: false })\r\n  }\r\n  _hKeyDownTrack = (event) => {\r\n     switch(event.keyCode){\r\n       case 37: {\r\n         const  { min, step } = this.props\r\n              , { value } = this.state;\r\n         if ( value > min) {\r\n           const _value = _addStep(value, -step, this.stepExp)\r\n           this._setValue(event, _value)\r\n         }\r\n         break;\r\n       }\r\n       case 39: {\r\n         const  { max, step } = this.props\r\n              , { value } = this.state;\r\n         if ( value < max) {\r\n           const _value = _addStep(value, step, this.stepExp)\r\n           this._setValue(event, _value)\r\n         }\r\n         break;\r\n       }\r\n       default: return;\r\n     }\r\n  }\r\n\r\n  _onDragUpdate = (event) => {\r\n    if (this.dragRunning) {\r\n      return;\r\n    }\r\n    this.dragRunning = true;\r\n    requestAnimationFrame(() => {\r\n      this.dragRunning = false;\r\n      const position = event.clientX - this._calcTrackOffset()\r\n      this._setValueFromPosition(event, position)\r\n    })\r\n  }\r\n\r\n  _setValue = (event, value) => {\r\n    this.setState({ value })\r\n    if (this.isOnChange){\r\n      this.props.onChange(value)\r\n    }\r\n  }\r\n\r\n  _calcTrackOffset = () => {\r\n    return this.trackComp.getBoundingClientRect()['left'];\r\n  }\r\n\r\n  _setValueFromPosition = (event, position) => {\r\n    const positionMax = this.trackComp['clientWidth']\r\n    if (position < 0) {\r\n      position = 0;\r\n    } else if (position > positionMax) {\r\n      position = positionMax\r\n    }\r\n\r\n    const { step, min, max } = this.props\r\n    let value\r\n    value = position/positionMax * (max - min)\r\n    value = Math.round(value / step) * step + min\r\n    value = parseFloat(value.toFixed(5))\r\n\r\n    if (value > max) {\r\n      value = max\r\n    } else if (value < min ) {\r\n      value = min\r\n    }\r\n\r\n    if (this.state.value !== value) {\r\n      this._setValue(event, value)\r\n    }\r\n  }\r\n\r\n  _refTrackComp = comp => this.trackComp = comp\r\n\r\n  render(){\r\n    const { step, min , max, style } = this.props\r\n    , { isHovered, isDragged, value } = this.state\r\n    , _lineAfterStyle = isHovered\r\n          ? {...S.LINE_AFTER, ...S.LINE_HOVERED}\r\n          : S.LINE_AFTER\r\n    , _circleStyle = isDragged ? S.CIRCLE_DRAGGED : null\r\n    , _emberStyle = isDragged ? S.EMBER : null\r\n    , _circleInnerEl = (isHovered || isDragged)\r\n          ? ( <div style={{ ...S.CIRCLE_INNER_EL, ..._emberStyle }}/> )\r\n          : null\r\n    , _percent = _toPercent(value, min, max)\r\n    , _widthBeforeStyle = _calcWidth(_percent)\r\n    , _widthAfterStyle = _calcWidth(100 - _percent)\r\n    , _leftStyle = _crLeftStyle(_percent)\r\n\r\n    return (\r\n      <div style={{...S.ROOT, ...style}}\r\n        role=\"slider\"\r\n        aria-valuemax={max}\r\n        aria-valuemin={min}\r\n        aria-valuenow={value}\r\n        tabIndex=\"0\"\r\n        onMouseDown={this._hMouseDown}\r\n        onMouseEnter={this._hMouseEnter}\r\n        onMouseLeave={this._hMouseLeave}\r\n      >\r\n        <div\r\n           ref={this._refTrackComp}\r\n           tabIndex=\"0\"\r\n           role=\"button\"\r\n           style={S.ROOT_LINE}\r\n           onKeyDown={this._hKeyDownTrack}\r\n           onFocus={this._hFocusTrack}\r\n           onBlur={this._hBlurTrack}\r\n        >\r\n          <div style={{...S.LINE_BEFORE, ..._widthBeforeStyle }} />\r\n          <div style={{..._lineAfterStyle, ..._widthAfterStyle }} />\r\n          <div\r\n             style={{...S.ROOT_CIRCLE, ..._circleStyle, ..._leftStyle }}\r\n          >\r\n            <div style={{ ...S.CIRCLE_INNER, ..._circleStyle}} >\r\n              {_circleInnerEl}\r\n            </div>\r\n          </div>\r\n          <input\r\n            type=\"hidden\"\r\n            step={step}\r\n            min={min}\r\n            max={max}\r\n            value={value}\r\n            required={true}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  setValue(value){\r\n    this.setState({ value })\r\n  }\r\n\r\n}\r\n\r\nexport default InputSlider\r\n"],"file":"InputSlider.js"}